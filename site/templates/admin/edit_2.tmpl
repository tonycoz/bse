<html>
<head>

  <title>
    Administration - <: ifnew :>New<: or :>Edit<: eif :> <:articleType:>
  </title>

  <link rel="stylesheet" type="text/css" href="/css/admin.css">

</head>

<body>
<h1>Administration Page</h1>
<:ifMessage:> 
<p><b><:message:></b></p>
<:or:><:eif:>
<p>| <a href="/admin/">Admin menu</a> | <:ifnew:><:or:><a href="<:article admin:>">See 
  article</a> | <:eif:><:editParent:> <:if new:><:or new:><a href="<:script:>?id=<:article id:>&_t=steps">Manage 
  step children/parents</a> | <:eif new:></p>
<:ifnew:><:or:><h2>Manage Images</h2><:eif:>

  <form enctype="multipart/form-data" method="POST" action="<:script:>">

  <:ifnew:><:or:><p>
  <input type="submit" name="showimages" value="<:articleType:> Image Wizard">
  </p><:eif:>


  <h2><:articleType:> Details</h2>

    <input type="hidden" name="level" value="<: level :>">
    <input type="hidden" name="id" value="<: article id :>">

  <table border="0" cellspacing="0" cellpadding="0" bgcolor="#000000" width="100%" class="table">
    <tr>
      <td>

        <table cellpadding="6" border="0" cellspacing="1" width="100%">
          <tr> 
            <th nowrap bgcolor="#FFFFFF" align="left"> <:parentType:>: </th>
            <td bgcolor="#FFFFFF" width="100%"> 
              <select name="parentid">
                <option value="">Please select a <:parentType:> <: list :> 
              </select>
            </td>
            <td bgcolor="#FFFFFF"><:help edit section:> </td>
          </tr>
          <tr> 
            <th nowrap bgcolor="#FFFFFF" align="left"> <:articleType:> title: 
            </th>
            <td bgcolor="#FFFFFF" width="100%"> 
              <input type="text" name="title" maxlength="<:cfg fields title_size 255:>" size="64" value="<: article title :>">
            </td>
            <td bgcolor="#FFFFFF"><:help edit title:> </td>
          </tr>
          <tr> 
            <th nowrap bgcolor="#FFFFFF" align="left"> Title image: </th>
            <td bgcolor="#FFFFFF" width="100%"> <:titleImages:> (upload this to 
              the /images/titles directory)</td>
            <td bgcolor="#FFFFFF">&nbsp;</td>
          </tr>
          <tr> 
            <th nowrap bgcolor="#FFFFFF" align="left"> Template: </th>
            <td bgcolor="#FFFFFF" width="100%"> <:templates:> </td>
            <td bgcolor="#FFFFFF"><:help edit template:> </td>
          </tr>
          <tr> 
            <th valign="top" nowrap bgcolor="#FFFFFF" align="left"> Body: </th>
            <td bgcolor="#FFFFFF" width="100%"> 
              <textarea name="body" rows="10" cols="60" wrap="virtual"><: article body :></textarea>
            </td>
            <td bgcolor="#FFFFFF" valign="top"><:help body body:> </td>
          </tr>
          <tr> 
            <th nowrap bgcolor="#FFFFFF" align="left"> Release date: </th>
            <td bgcolor="#FFFFFF" width="100%"> 
              <input type="text" name="release" value="<: date "%d/%m/%Y" article release :>" size="10" maxlength="10">
              (dd/mm/yyyy<: ifnew :> - default is today<: or :><: eif :>)</td>
            <td bgcolor="#FFFFFF"><:help edit release:></td>
          </tr>
          <tr> 
            <th nowrap bgcolor="#FFFFFF" align="left"> Expiry date: </th>
            <td bgcolor="#FFFFFF" width="100%"> 
              <input type="text" name="expire" value="<: date "%d/%m/%Y" article expire :>" size="10" maxlength="10">
              (dd/mm/yyyy - <: ifnew :>default is never, <: or :><: eif :>blank 
              for never expires)</td>
            <td bgcolor="#FFFFFF"><:help edit expire:></td>
          </tr>
          <tr> 
            <th nowrap bgcolor="#FFFFFF" align="left"> Summary length: </th>
            <td bgcolor="#FFFFFF" width="100%"> 
              <input type="text" name="summaryLength" size="10" maxlength="10" value="<: article summaryLength :>">
              (in characters - <: ifnew :>default inherited from <:parentType:> <: or :><: eif :> 
              zero for no summary)</td>
            <td bgcolor="#FFFFFF"><:help edit summary:></td>
          </tr>
          <tr> 
            <th nowrap bgcolor="#FFFFFF" align="left"> Display threshold: </th>
            <td bgcolor="#FFFFFF" width="100%"> 
              <input type="text" name="threshold" size="10" maxlength="10" value="<: article threshold :>">
            </td>
            <td bgcolor="#FFFFFF"><:help edit threshold:> </td>
          </tr>
          <tr> 
            <th nowrap bgcolor="#FFFFFF" align="left"> Keywords: </th>
            <td bgcolor="#FFFFFF" width="100%"> 
              <input type="text" name="keyword" maxlength="255" size="60" value="<: article keyword :>">
              (comma separated)</td>
            <td bgcolor="#FFFFFF"><:help edit keywords:> </td>
          </tr>
          <tr> 
            <th nowrap bgcolor="#FFFFFF" align="left">List article:</th>
            <td bgcolor="#FFFFFF" width="100%"> <:list listed:> </td>
            <td bgcolor="#FFFFFF"><:help edit listed:></td>
          </tr>
          <tr> 
            <th nowrap bgcolor="#FFFFFF" align="left" valign="top">Thumbnail image:</th>
            <td bgcolor="#FFFFFF" width="100%"> 
              <input type=file name=thumbnail>
              <:ifArticle thumbImage:><img src="/images/<:article thumbImage:>"> 
              <input type=checkbox name="remove_thumb">
              Remove<:or:><:eif:></td>
            <td bgcolor="#FFFFFF" valign="top"><:help edit thumb:></td>
          </tr>
          <:if Article id:> 
          <tr> 
            <th nowrap bgcolor="#FFFFFF" align="left" valign="top"><a name="files"></a>Files:</th>
            <td nowrap bgcolor="#FFFFFF" width="100%"> <:if Files:> 
              <table cellpadding="0" cellspacing="0" border="0" bgcolor="#333333">
                <tr><td> 
                    <table cellpadding="5" cellspacing="1" border="0">
                      <tr bgcolor="#FFFFFF"> 
                        <th>Filename</th>
                        <th>Size</th>
                        <th>Type</th>
                        <th>D/l</th>
                        <th>Pay</th>
                        <th>User</th>
                      </tr>
                      <:iterator begin files:> 
                      <tr bgcolor="#FFFFFF"> 
                        <td><:file displayName:></td>
                        <td align="center"><:kb file sizeInBytes:></td>
                        <td><:file contentType:></td>
                        <td align=center><:ifFile download:>Yes<:or:>No<:eif:></td>
                        <td align=center><:ifFile forSale:>Yes<:or:>No<:eif:></td>
                        <td align=center><:ifFile requireUser:>Yes<:or:>No<:eif:></td>
                      </tr>
                      <:iterator end files:> 
                    </table>
              </td></tr></table>
              <:or Files:><p>No files are attached to this article.<:eif Files:> 
                <a href="<:script:>?filelist=1&id=<:article id:>"><b>Manage Files</b></a></p>
            </td>
            <td nowrap bgcolor="#FFFFFF" valign="top"><:help edit files:></td>
          </tr>
          <tr> 
            <th valign="top" nowrap bgcolor="#FFFFFF" align="left"> Uploaded images: 
            </th>
            <td align="center" bgcolor="#FFFFFF" width="100%"> <:iterator begin 
              images:> <img src="/images/<: image image :>" alt="<:image alt :>" width= 
              <:image width:> height=<:image height:>> <:iterator separator images:> 
              <hr noshade size="1">
              <: iterator end images :> &nbsp; <br></td>
            <td bgcolor="#FFFFFF" valign="top"><:help edit images:> </td>
          </tr>
          <:or Article:><:eif Article:> 
        </table>
</td>
</tr>
</table>

  <p>
    <input type="submit" name="save"
           value="  <: ifnew :>Add New<: or :>Update<: eif :> <: articleType :>  "></p>
  </form>
<:if children:> <:ifEq [article id] 3:> 
<h2>Catalogs</h2>
<:or:> 
<h2><: childtype :></h2>
<:eif:><a name="children"></a> 
<table border="0" cellspacing="0" cellpadding="0" bgcolor="#000000" width="100%" class="table">
  <tr>
      <td>
      <table border=0 cellpadding="6" cellspacing="1" width="100%">
        <tr bgcolor="#FFFFFF"> 
          <th width="30%">Title</th>
          <th width="70%">Summary</th>
          <th>Listed</th>
          <th nowrap>Modify</th>
        </tr>
        <tr> 
          <td colspan="4" bgcolor="#FFFFFF">Reorder child articles: <a href="/cgi-bin/admin/reorder.pl?parentid=<:article id:>&sort=title&refreshto=/cgi-bin/admin/add.pl?id=<:article id:>">by 
            title</a> | <a href="/cgi-bin/admin/reorder.pl?parentid=<:article id:>&sort=date&refreshto=/cgi-bin/admin/add.pl?id=<:article id:>">by 
            date</a> | <a href="/cgi-bin/admin/reorder.pl?parentid=<:article id:>&reverse=1&refreshto=/cgi-bin/admin/add.pl?id=<:article id:>">reverse 
            order</a></td>
        </tr>
        <:iterator begin children:> 
        <tr bgcolor="#FFFFFF"> 
          <td width="30%"><a href="<:child admin:>"><:child title:></a></td>
          <td width="70%"><: summary child body :></td>
          <td align="center"><: is child listed :></td>
          <td nowrap> <a href="/cgi-bin/admin/add.pl?id=<:child id:>">Edit</a> 
            <a href="/cgi-bin/admin/add.pl?id=<:article id:>&deleteid=<:child id:>&remove=1" onClick="return window.confirm('Are you sure you want to delete this article')">Delete</a> 
            <:movechild:> </td>
        </tr>
        <:iterator separator children:> <:iterator end children:> 
      </table>
</td>
</tr>
</table>
<:or children:>
<:eif children:>
<:if HaveChildType:>
<:if new:>
<:or new:>
<form action="/cgi-bin/admin/add.pl">
<input type=hidden name="parentid" value="<:article id:>">
  <p> 
    <input type=submit value="Add <:ifEq [article id] 3:>Catalog<:or:><: childtype :><:eif:>">
  </p>
</form>
<:eif new:> <:or HaveChildType:> <:eif HaveChildType:>
<p><font size="-1">BSE Release <:release:></font></p>
</body></html>
